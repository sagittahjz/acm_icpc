# 2016 Multi-University Training Contest 1

## [1001 Abandoned country](http://acm.hdu.edu.cn/showproblem.php?pid=5723)

###题意

给出n个点m条边 求一个颗最小生成树以及树上任意不同的两点间距离期望

###题解

第一问

最小生成树 可用 kruskal 复杂度 O(nlogm)

第二问 

树形DP 求出在所有情况下每条边经过总次数(算每条边的贡献)

然后再除以方案数得到期望 复杂度 O(n)

##[1002 Chess](http://acm.hdu.edu.cn/showproblem.php?pid=5724)

###题意

一个n行20列的棋盘上有一些棋子 两人博弈

每次可以选择一个棋子向右跳 如果下一格没有就跳到下一格 否则跳到右边第一个空的位置

当一个选手无法操作时 另一名选手胜利


###题解

显然是一道博弈题 我们可以先考虑一行的情况

一行的时候可以通过记忆化搜索等手段求出SG函数 (此题是DAG 因此直接递推也可以)

再根据NIM和 我们将没一行的sg函数异或起来即可得到结果

预处理sg函数复杂度 O(2^20 * 20 * 20)

计算结果复杂度 O(t * n * m)

###HINT

m可能为0 我在这里坑了1h

##[1004  GCD](http://acm.hdu.edu.cn/showproblem.php?pid=5726)

###题意

有n个正整数 现在每次询问一个区间内所有数的gcd

以及区间gcd和该结果相等的区间个数

###题解

第一问

显然用一些带log的数据结构可以轻松解决 如果用ST表预处理的话

ST表预处理复杂度 O(nlognloga) 询问复杂度 O(qloga)

第二问

方法很多 这里介绍一种比较直接的想法

我们知道 对于一个正整数x 每次和一个数求gcd 结果要么不变 要么至少除2

因此当我们把区间左端点固定 右端点往右移动 显然答案是单调不增并且不同答案数量是log级别的

对于这个区间可以用ST表预处理后二分得到

除去ST表的预处理复杂度O(nlognlog^2a) 询问复杂度O(q)

##[1005  Necklace](http://acm.hdu.edu.cn/showproblem.php?pid=5727)

###题意

给定n对阴阳宝石 要做成一个项链 并且要阴阳相邻

再给定一些约束关系 其中有些阳宝石如果和某些阴宝石相邻会变暗从而降低项链价值

为项链价值最少降低多少

###题解

我们可以枚举阴宝石的顺序 由于是环 所以可以固定一个 然后枚举剩下的位置(全排列)

这里的复杂度是O((n - 1) ! * (n - 1)) (可以直接用next_permutation这个库函数)

确定好阴宝石顺序后 我们把阳宝石插在中间

这里可以建图 如果是插在左右两边都没约束的连权值为1的边

否则连权值为0的边(实际实现的时候可以不连边)

然后用匈牙利算法求出最大匹配 再用n减去就好

匹配复杂度O(n ^ 2)

整体复杂度O(n! * n ^ 2)

###HINT

比赛时没认真读题 当成如果和两个有约束关系的阴宝石相邻算变暗两次

然后就去想 EK & 网络流啥的 于是就坑了
